<!DOCTYPE html>
<html>
    <head>
        <title>
        </title>
        <script src="https://code.highcharts.com/stock/highstock.js"></script>
        <script src="https://code.highcharts.com/stock/modules/data.js"></script>
        <script src="https://code.highcharts.com/stock/modules/exporting.js"></script>
        <script src="https://code.highcharts.com/stock/modules/export-data.js"></script>
        <script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>

        <script>
            $.ajax({
                url:'https://opendata.cwb.gov.tw/api/v1/rest/datastore/F-D0047-091?Authorization=CWB-373C6328-6BF2-41B3-BB3B-147802B82875&format=JSON&locationName=&elementName=&sort=time',
                method: "GET",
                datatype:"json",
                success: function(res){
                    console.log(res);
                    data = res.records.locations[0].location[6].weatherElement;
                    console.log(data);
                    updateweather();
                }
            })

            function updateweather(){
                var inner=document.querySelector('.container');
                for(var i=0;i<=14;i++){
                    var weatherdata=data[1].time[i];
                    var weatherdescription=data[10].time[i];
                    var weatherimg;
                    if(weatherdescription.elementValue[0].value.indexOf("晴時多雲")!=-1){
                        weatherimg="cloudy.png";
                    }else if(weatherdescription.elementValue[0].value.indexOf("多雲")!=-1){
                        weatherimg="cloud.png";
                    }else if(weatherdescription.elementValue[0].value.indexOf("晴天")!=-1){
                        weatherimg="sun.png";
                    }else if(weatherdescription.elementValue[0].value.indexOf("多雲時晴")!=-1){
                        weatherimg="cloudy(1).png";
                    }else{
                        weatherimg="raining.png";
                    }
                    inner.innerHTML+="<div><b>日期:"+weatherdata.startTime+" 氣溫:"+weatherdata.elementValue[0].value+"</b><br>簡短描述: "+ weatherdescription.elementValue[0].value+"<img src='./image/"+ weatherimg+"' width='30' height='30'></br></div>";
                }
                
            }
        </script>
        <style>
            h1{
                color: white;
                background-color:cadetblue;
                padding: 10px;
                align-items: center;
                border-radius: 5px;
                text-align: center;
            }
            body{
                background-color: aliceblue;
            }
            h3{
                color: white;
                background-color:cornflowerblue;
                padding: 10px;
                align-items: center;
                border-radius: 5px;
            }
            div{
                background-color:lightsteelblue ;
            }
        </style>
    </head>


    <body>
        

    <h3>這邊我會放置任何我想追蹤的圖表</h3>
    <h3>未來7天 天氣</h3>
    <div class="container" style="height: 400px; min-width: 310px"></div>
    

    
    </body>
</html>